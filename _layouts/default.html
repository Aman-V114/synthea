<!DOCTYPE html>
<html lang='en'>
  {% include head.html %}
  <body>
    <div id="loading"> 
      <svg class="spinner centered" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
         <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
      </svg>
      <span class="sr-only">Page is loading...</span>
    </div>
    <div id="page">
      <div class="wrapper">
        {% include header.html %}
        {{ content }}
        <div class="wrapper-padding">
        </div>
      </div>
    {% include footer.html %}
  </div>
  <!-- Scripts for rendering -->
  <script src="{{site.baseurl}}/assets/js/material.min.js"></script>
  <script src="{{site.baseurl}}/assets/js/snackbar.min.js"></script>
  <script> $.material.init(); </script>
  <script type="text/javascript" src="{{site.baseurl}}/assets/js/main.js"></script>  
    {% if jekyll.environment == 'production' %}
      {% include _analytics.html %}
    {% endif %}
  <script>
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#295677",
          "text": "#fff"
        },
        "button": {
          "background": "#f1d600"
        }
      },
      "theme": "classic",
      "type": "opt-in",
      "content": {
        "message": "We use cookies to improve your experience and analyze usage to help improve our site.",
        "dismiss": "Agree",
        "deny": "Deny",
        "link": "Cookie Policy",
        "href": "cookie_policy.html"
      },
      onInitialise: function (status) {
        var type = this.options.type;
        var didConsent = this.hasConsented();

        if (didConsent) {
          // console.log("Initialize GA CREATE");
          if (typeof ga !== 'undefined') {
            ga('create', '{{ site.google_analytics }}', 'auto');
            ga('send', 'pageview');
          }
        } else {
          // console.log("Initialize GA REMOVE");
          if (typeof ga !== 'undefined') {
            ga('remove');
          }
          document.cookie = '_ga=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'
          document.cookie = '_gat=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'
          document.cookie = '_gid=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'
        }
      },
      onStatusChange: function(status, chosenBefore) {
        var type = this.options.type;
        var didConsent = this.hasConsented();

        if (didConsent) {
          // console.log("Status Change GA CREATE");
          if (typeof ga !== 'undefined') {
            ga('create', '{{ site.google_analytics }}', 'auto');
            ga('send', 'pageview');
          }
        } else {
          // console.log("Status Change GA REMOVE");
          if (typeof ga !== 'undefined') {
            ga('remove');
          }
          document.cookie = '_ga=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'
          document.cookie = '_gat=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'
          document.cookie = '_gid=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'
        }
      },
      onRevokeChoice: function() {
        var type = this.options.type;
        var didConsent = this.hasConsented();

        if (didConsent) {
          // console.log("Revoke GA CREATE");
          if (typeof ga !== 'undefined') {
            ga('create', '{{ site.google_analytics }}', 'auto');
            ga('send', 'pageview');
          }
        } else {
          // console.log("Revoke GA REMOVE");
          if (typeof ga !== 'undefined') {
            ga('remove');
          }
          document.cookie = '_ga=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'
          document.cookie = '_gat=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'
          document.cookie = '_gid=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/'
        }
      }
    });
  </script>
  </body>
</html>