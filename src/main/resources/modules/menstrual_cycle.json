{
  "name": "Menstrual Cycle",
  "remarks": [ 
    "The reproductive system of a female, unlike men, shows regular cyclic changes that teleologically may be regarded as periodic preparation for pregnancy and fertilization. In primates and humans, the cycle is a menstrual cycle, and its most conspicuous feature is the periodic vaginal bleeding that occurs with the shedding of uterine mucose (menstruation). The length of the cycle is notoriously variable, but an average figure is 28 days from the start of one menstrual period to the start of the next. By common usage, the days of the cycle are identified by number starting with the first day of menstruation. It begins at puberty, ranging from the ages of 10 to 16, and ends at menopause at an average age of 51.  -Thiyagarajan, Basit, Jeanmonod 2022",
    "",
    "References",
    "https://www.ncbi.nlm.nih.gov/books/NBK500020/",
    "https://www.womenshealth.gov/a-z-topics/endometriosis",
    "Roblitz2013_Menstrual_Cycle.pdf", 
    "", 
    "Known model limitations:",
    "This model is significantly more complex than other models included in Synthea, with nearly 10x more parameters than the circadian cycle.",
    "Currently, only Estradiol output levels are mapped to output data.",
    "This model generates continuous data over a 28 cycle, which would not be recorded in any known clinical test.  Rather, laboratory tests would typically involve a blood draw, and a discrite value at a single point in time.",
    "Details for writing intersection functions to extract a single value are explianed in greater detail in the Synthea Wiki."
   ],
  "states": {
    "Initial": {
      "type": "Initial",
      "conditional_transition": [
        {
          "transition": "Female",
          "condition": {
            "condition_type": "Gender",
            "gender": "F"
          }
        },
        {
          "transition": "Terminal"
        }
      ]
    },
    "Terminal": {
      "type": "Terminal"
    },
    "Female": {
      "type": "Simple",
      "remarks": [
        "About one-in-five Americans use a smart watch or fitness tracker.  \n https://www.pewresearch.org/short-reads/2020/01/09/about-one-in-five-americans-use-a-smart-watch-or-fitness-tracker/"
      ],
      "distributed_transition": [
        {
          "transition": "Age_13-19",
          "distribution": 0.10
        },
        {
          "transition": "Age_20-29",
          "distribution": 0.20
        },
        {
          "transition": "Age_30-39",
          "distribution": 0.35
        },
        {
          "transition": "Age_40-49",
          "distribution": 0.35
        }
      ]
    },
    "Age_13-19": {
      "type": "Delay",
      "direct_transition": "Endometriosis",
      "range": {
        "low": 13,
        "high": 19,
        "unit": "years"
      }
    },
    "Age_20-29": {
      "type": "Delay",
      "direct_transition": "Endometriosis",
      "range": {
        "low": 20,
        "high": 29,
        "unit": "years"
      }
    },
    "Age_30-39": {
      "type": "Delay",
      "direct_transition": "Endometriosis",
      "range": {
        "low": 30,
        "high": 39,
        "unit": "years"
      }
    },
    "Age_40-49": {
      "type": "Delay",
      "direct_transition": "Endometriosis",
      "range": {
        "low": 40,
        "high": 49,
        "unit": "years"
      }
    },


    "Endometriosis": {
      "type": "ConditionOnset",
      "target_encounter": "Obgyn_Encounter",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 129103003,
          "display": "Endometriosis (disorder)"
        }
      ],
      "remarks": [ "" ],
      "distributed_transition": [
        {
          "transition": "Obgyn_Encounter",
          "distribution": 0.2
        },
        {
          "transition": "Symptom_Onset_Delay",
          "distribution": 0.79
        },
        {
          "transition": "Terminal",
          "distribution": 0.01
        }
      ]
    },
    "Symptom_Onset_Delay": {
      "type": "Delay",
      "direct_transition": "Menstrual_Cramps_Symptom",
      "range": {
        "low": 1,
        "high": 5,
        "unit": "years"
      }
    },
    "Menstrual_Cramps_Symptom": {
      "type": "Symptom",
      "symptom": "Cramps",
      "cause": "Endometriosis",
      "direct_transition": "Menstrual_Cramps_Symptom_Ends",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 431416001,
          "display": "Menstrual cramp (finding)"
        }
      ]
    },
    "Menstrual_Cramps_Symptom_Ends": {
      "type": "Symptom",
      "symptom": "Cramps",
      "cause": "Endometriosis",
      "direct_transition": "Endometriosis_End"
    },

    "Endometriosis_End": {
      "type": "ConditionEnd",
      "condition_onset": "Endometriosis",
      "direct_transition": "Terminal"
    },

    "Obgyn_Encounter": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "reason": "Gynecology_Exam",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185221008,
          "display": "Seen in gynecology clinic (finding)"
        }
      ],
      "direct_transition": "Gynecology_Exam"
    },


    "Obgyn_Encounter_End": {
      "type": "EncounterEnd",
      "direct_transition": "Terminal",
      "discharge_disposition": {
        "system": "NUBC",
        "code": "01",
        "display": "Discharged to home care or self care (routine discharge)"
      }
    },


    "Gynecology_Exam": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 396540005,
          "display": "Phlebotomy (procedure)"
        }
      ],
      "duration": {
        "low": 5,
        "high": 10,
        "unit": "minutes"
      },
      "direct_transition": "Endocrinology_Sim"
    },
    "Endocrinology_Sim": {
      "type": "Physiology",
      "model": "Roblitz2013_Menstrual_Cycle.xml",
      "solver": "dormand_prince_54",
      "step_size": 1,
      "sim_duration": 28,
      "lead_time": 0,
      "inputs": [],
      "outputs": [
        {
          "from_list": "E2",
          "to": "endocrinology_data",
          "type": "Attribute"
        }
      ],
      "direct_transition": "HormonePanel",
      "alt_direct_transition": "Clear_endocrinology_data"
    },
    "HormonePanel": {
      "type": "Observation",
      "category": "procedure",
      "unit": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "2243-4",
          "display": "Estradiol (E2) [Mass/volume] in Serum or Plasma"
        }
      ],
      "sampled_data": {
        "attributes": [
          "endocrinology_data"
        ]
      },
      "direct_transition": "HormonePanel_Chart"
    },
    "HormonePanel_Chart": {
      "type": "Observation",
      "category": "procedure",
      "unit": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "2243-4",
          "display": "Estradiol (E2) [Mass/volume] in Serum or Plasma"
        }
      ],
      "attachment": {
        "chart": {
          "type": "line",
          "title": "Estradiol (E2) [Mass/volume] in Serum or Plasma",
          "axis_attribute_x": "time",
          "axis_attribute_y": "IU/L",
          "width": 400,
          "height": 200,
          "series": [
            {
              "attribute": "endocrinology_data"
            }
          ]
        }
      },
      "direct_transition": "Clear_endocrinology_data"
    },
    "Clear_endocrinology_data": {
      "type": "SetAttribute",
      "attribute": "endocrinology_data",
      "direct_transition": "Obgyn_Encounter_End"
    }
  },
  "gmf_version": 1
}