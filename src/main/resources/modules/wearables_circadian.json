{
  "name": "Wearables_Circadian",
  "remarks": [
    "The regulation of sleep is processed by the homeostatic physiology of the circadian rhythm, the sleep/wake cycle. Circadian rhythm is the 24-hour internal clock in our brain that regulates cycles of alertness and sleepiness by responding to light changes in our environment. ",
    "",
    "References",
    "https://www.ncbi.nlm.nih.gov/books/NBK519507/",
    "https://houstonsleepsolutions.com/blog/the-statistics-of-sleep-apnea/",
    "",
    "Known model limitations:",
    "This model produces continuous data over 24hrs, and would not typically be reportable in any sort of laboratory test.  Clinical tests of melatonin or cortisol would take discrete sample at a specific time.",
    "This model can be interected with another function (i.e. a line), to produce a sleep/wake cycle.  Additional information on how to do this is provided in the Wiki.",
    "This model me be useful in generating cyclical daily habits, such as taking medicaitons in the morning, exercising at certain times of the day, and so forth.  Please see the Wiki for additional details."
  ],
  "states": {
    "Initial": {
      "type": "Initial",
      "name": "Initial",
      "direct_transition": "Sleep Apnea Guard"
    },
    "Terminal": {
      "type": "Terminal",
      "name": "Terminal"
    },
    "Symptom_Onset_Delay": {
      "type": "Delay",
      "direct_transition": "Insomia_Symptom",
      "range": {
        "low": 1,
        "high": 5,
        "unit": "years"
      },
      "name": "Symptom_Onset_Delay"
    },
    "Insomia_Symptom": {
      "type": "Symptom",
      "symptom": "Insomnia",
      "cause": "Sleep_Apnea",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 193462001,
          "display": "Insomnia (disorder)",
          "value_set": ""
        }
      ],
      "direct_transition": "Insomia_Symptom_Ends",
      "name": "Insomia_Symptom"
    },
    "Insomia_Symptom_Ends": {
      "type": "Symptom",
      "symptom": "Insomnia",
      "cause": "Sleep_Apnea",
      "direct_transition": "Physical_Activity_Resumes",
      "name": "Insomia_Symptom_Ends"
    },
    "Physical_Activity_Resumes": {
      "type": "ConditionEnd",
      "condition_onset": "Sleep Apnea Guard",
      "direct_transition": "Terminal",
      "name": "Physical_Activity_Resumes"
    },
    "SleepStudy_Baseline_Encounter": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "reason": "SleepStudy_Baseline",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 60554003,
          "display": "Polysomnography (procedure)",
          "value_set": ""
        }
      ],
      "direct_transition": "Monitor_iWatch",
      "name": "SleepStudy_Baseline_Encounter"
    },
    "Monitor_iWatch": {
      "type": "Device",
      "code": {
        "system": "SNOMED-CT",
        "code": 13288007,
        "display": "Monitor, device (physical object)"
      },
      "direct_transition": "SleepStudy_Baseline",
      "assign_to_attribute": "sleep_data_iwatch",
      "name": "Monitor_iWatch"
    },
    "SleepStudy_Baseline_Encounter_End": {
      "type": "EncounterEnd",
      "direct_transition": "Terminal",
      "discharge_disposition": {
        "system": "NUBC",
        "code": "01",
        "display": "Discharged to home care or self care (routine discharge)"
      },
      "name": "SleepStudy_Baseline_Encounter_End"
    },
    "SleepStudy_Baseline": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 60554003,
          "display": "Polysomnography (procedure)",
          "value_set": ""
        }
      ],
      "duration": {
        "low": 5,
        "high": 10,
        "unit": "minutes"
      },
      "direct_transition": "SleepMonitor_Sim",
      "name": "SleepStudy_Baseline"
    },
    "SleepMonitor_Sim": {
      "type": "Physiology",
      "model": "Hong2009_CircadianClock.xml",
      "solver": "runge_kutta",
      "step_size": 0.01,
      "sim_duration": 24,
      "lead_time": 0,
      "inputs": [
        {
          "from_exp": "#{BMI}",
          "to": "kica"
        }
      ],
      "outputs": [
        {
          "from_list": "CPtot",
          "to": "sleep_monitor_data",
          "type": "Attribute"
        }
      ],
      "direct_transition": "SleepMonitor_Data",
      "alt_direct_transition": "SleepAnalysis",
      "name": "SleepMonitor_Sim"
    },
    "SleepMonitor_Data": {
      "type": "Observation",
      "category": "procedure",
      "unit": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 60554003,
          "display": "Polysomnography (procedure)",
          "value_set": ""
        }
      ],
      "sampled_data": {
        "attributes": [
          "sleep_monitor_data"
        ]
      },
      "direct_transition": "SleepMonitor_Chart",
      "name": "SleepMonitor_Data"
    },
    "SleepMonitor_Chart": {
      "type": "Observation",
      "category": "procedure",
      "unit": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 60554003,
          "display": "Polysomnography (procedure)",
          "value_set": ""
        }
      ],
      "attachment": {
        "chart": {
          "type": "line",
          "title": "Circadian Cycle",
          "axis_attribute_x": "time",
          "width": 400,
          "height": 200,
          "series": [
            {
              "attribute": "sleep_monitor_data"
            }
          ]
        }
      },
      "direct_transition": "Clear_SleepMonitor_result",
      "name": "SleepMonitor_Chart"
    },
    "Clear_SleepMonitor_result": {
      "type": "SetAttribute",
      "attribute": "sleep_monitor_data",
      "direct_transition": "SleepAnalysis",
      "name": "Clear_SleepMonitor_result"
    },
    "SleepAnalysis": {
      "type": "Observation",
      "category": "exam",
      "unit": "",
      "codes": [
        {
          "system": "http://loinc.org",
          "code": "93832-4",
          "display": "Sleep duration.",
          "value_set": ""
        }
      ],
      "direct_transition": "SleepStudy_Baseline_Encounter_End",
      "name": "SleepAnalysis"
    },
    "Sleep Apnea Guard": {
      "type": "Guard",
      "allow": {
        "condition_type": "Active Condition",
        "codes": [
          {
            "system": "SNOMED-CT",
            "code": 73430006,
            "display": "Sleep apnea"
          }
        ]
      },
      "distributed_transition": [
        {
          "transition": "SleepStudy_Baseline_Encounter",
          "distribution": 0.2
        },
        {
          "transition": "Symptom_Onset_Delay",
          "distribution": 0.8
        }
      ],
      "remarks": [
        "Sleep apnea is prevalent in as many as 18 million Americans alone. This statistic denotes that approximately 1 in every 15 Americans, or 6.62% of the total American population have a case of sleep apnea.",
        "https://houstonsleepsolutions.com/blog/the-statistics-of-sleep-apnea/#:~:text=Sleep%20apnea%20is%20prevalent%20in,a%20case%20of%20sleep%20apnea."
      ],
      "name": "Sleep Apnea Guard"
    }
  },
  "gmf_version": 1
}