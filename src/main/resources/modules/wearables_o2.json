{
  "name": "Wearables_O2_Stats",
  "remarks": [
    "According to the American Medical Association, it is believed that more than 30 million people have sleep apnea in the US, about 9% of the population.  Manufacturers estimate that approximately 8 million sleep with a CPAP machine each night.",
    "",
    "References",
    "https://www.cpap.com/blog/sleep-apnea-statistics/",
    "https://houstonsleepsolutions.com/blog/the-statistics-of-sleep-apnea/",
    "",
    "Known model limitations:",
    "Physiology model reports arterial oxygnation (PO2ART) over a 60 second (1 min) interval.  Wearable devices that monitor sleep typically provide summary statistics, such as '5hrs 30min of sleep last night'.  Physiology model may need to be sampled multiple times for a sleep study observation.    ",
    ""
  ],
  "states": {
    "Initial": {
      "type": "Initial",
      "name": "Initial",
      "direct_transition": "Sleep Apnea Guard"
    },
    "Terminal": {
      "type": "Terminal",
      "name": "Terminal"
    },
    "Symptom_Onset_Delay": {
      "type": "Delay",
      "direct_transition": "Snoring",
      "range": {
        "low": 1,
        "high": 5,
        "unit": "years"
      },
      "name": "Symptom_Onset_Delay"
    },
    "Snoring": {
      "type": "Symptom",
      "symptom": "Snoring",
      "cause": "Sleep_Apnea",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 72863001,
          "display": "Snoring (finding)",
          "value_set": ""
        }
      ],
      "direct_transition": "Snoring_Ends",
      "name": "Snoring"
    },
    "Snoring_Ends": {
      "type": "Symptom",
      "symptom": "Snoring",
      "cause": "Sleep_Apnea",
      "direct_transition": "Sleep_Apnea_Resolved",
      "name": "Snoring_Ends"
    },
    "Sleep_Apnea_Resolved": {
      "type": "ConditionEnd",
      "direct_transition": "Terminal",
      "name": "Sleep_Apnea_Resolved"
    },
    "Wellness_Baseline_Encounter": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "reason": "Wellness_Baseline",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 225385005,
          "display": "Behavioral assessment (procedure)",
          "value_set": ""
        }
      ],
      "direct_transition": "Monitor_iWatch",
      "name": "Wellness_Baseline_Encounter"
    },
    "Monitor_iWatch": {
      "type": "Device",
      "code": {
        "system": "SNOMED-CT",
        "code": 13288007,
        "display": "Monitor, device (physical object)"
      },
      "direct_transition": "Monitor_CPAP",
      "assign_to_attribute": "o2_data_iwatch",
      "name": "Monitor_iWatch"
    },
    "Monitor_CPAP": {
      "type": "Device",
      "code": {
        "system": "SNOMED-CT",
        "code": 702172008,
        "display": "Home continuous positive airway pressure unit (physical object)"
      },
      "direct_transition": "Sleep_Study_Baseline",
      "assign_to_attribute": "o2_data_cpap",
      "name": "Monitor_CPAP"
    },
    "Wellness_Baseline_Encounter_End": {
      "type": "EncounterEnd",
      "direct_transition": "Terminal",
      "discharge_disposition": {
        "system": "NUBC",
        "code": "01",
        "display": "Discharged to home care or self care (routine discharge)"
      },
      "name": "Wellness_Baseline_Encounter_End"
    },
    "Sleep_Study_Baseline": {
      "type": "Observation",
      "category": "exam",
      "unit": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "410189008",
          "display": "Taking patient vitals signs education (procedure)",
          "value_set": ""
        }
      ],
      "direct_transition": "CPAP_Baseline",
      "name": "Sleep_Study_Baseline"
    },
    "CPAP_Baseline": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 47545007,
          "display": "Continuous positive airway pressure ventilation treatment (regime/therapy)",
          "value_set": ""
        }
      ],
      "duration": {
        "low": 5,
        "high": 10,
        "unit": "minutes"
      },
      "direct_transition": "CPAP_Sim",
      "name": "CPAP_Baseline"
    },
    "CPAP_Sim": {
      "type": "Physiology",
      "model": "Guyton1972_PulmonaryOxygenIntake.xml",
      "solver": "euler",
      "step_size": 0.1,
      "sim_duration": 60,
      "lead_time": 2,
      "inputs": [
        {
          "from_exp": "#{BMI} * 0.497 + 56.15",
          "to": "OVA"
        }
      ],
      "outputs": [
        {
          "from_list": "PO2ART",
          "to": "o2_result",
          "type": "Attribute"
        }
      ],
      "direct_transition": "CPAP_Data",
      "alt_direct_transition": "Clear_CPAP_result",
      "name": "CPAP_Sim"
    },
    "CPAP_Data": {
      "type": "Observation",
      "category": "procedure",
      "unit": "",
      "codes": [
        {
          "system": "http://loinc.org",
          "code": "2703-7",
          "display": "Oxygen [Partial pressure] in Arterial blood",
          "value_set": ""
        }
      ],
      "sampled_data": {
        "attributes": [
          "o2_result"
        ]
      },
      "direct_transition": "CPAP_Chart",
      "name": "CPAP_Data"
    },
    "CPAP_Chart": {
      "type": "Observation",
      "category": "procedure",
      "unit": "",
      "codes": [
        {
          "system": "http://loinc.org",
          "code": "2703-7",
          "display": "Oxygen [Partial pressure] in Arterial blood",
          "value_set": ""
        }
      ],
      "attachment": {
        "chart": {
          "type": "line",
          "title": "CPAP O2 Usage",
          "axis_attribute_x": "time",
          "axis_attribute_y": "mmHg",
          "width": 400,
          "height": 200,
          "series": [
            {
              "attribute": "o2_result"
            }
          ]
        }
      },
      "direct_transition": "Clear_CPAP_result",
      "name": "CPAP_Chart"
    },
    "Clear_CPAP_result": {
      "type": "SetAttribute",
      "attribute": "o2_result",
      "direct_transition": "SleepAnalysis",
      "name": "Clear_CPAP_result"
    },
    "SleepAnalysis": {
      "type": "Observation",
      "category": "exam",
      "unit": "",
      "codes": [
        {
          "system": "http://loinc.org",
          "code": "93832-4",
          "display": "Sleep duration.",
          "value_set": ""
        }
      ],
      "direct_transition": "Wellness_Baseline_Encounter_End",
      "name": "SleepAnalysis"
    },
    "Sleep Apnea Guard": {
      "type": "Guard",
      "allow": {
        "condition_type": "Active Condition",
        "codes": [
          {
            "system": "SNOMED-CT",
            "code": 73430006,
            "display": "Sleep apnea"
          }
        ]
      },
      "name": "Sleep Apnea Guard",
      "distributed_transition": [
        {
          "transition": "Symptom_Onset_Delay",
          "distribution": 0.8
        },
        {
          "transition": "Wellness_Baseline_Encounter",
          "distribution": 0.2
        }
      ]
    }
  },
  "gmf_version": 1
}